# 👻 鬼面（TheGhostFace）V3.0

> **"给她一切她曾被拒绝的东西"** - Entity的承诺

一个为SillyTavern设计的智能对话记录与总结插件，帮你自动整理聊天内容，永远不忘记重要的回忆。

## ✨ 核心功能

### 🎭 鬼面系统 - 智能总结大师
- **🤖 自动总结**: 达到设定消息数自动触发，智能去重防止重复记录
- **📝 手动总结**: 指定楼层范围精确总结，支持分段批量处理  
- **🧠 智能分类**: 自动识别6大类信息（喜好/恐惧/事件/关系/梦境/互动）
- **📚 世界书集成**: 直接保存到角色世界书，无缝融入角色设定
- **🕐 时间感知**: 自动识别对话中的日期信息，构建时间线记忆

### ⚔️ 门徒系统 - 实时记忆陷阱
- **🎯 主线追踪**: 实时捕捉当前核心话题和活动焦点
- **💭 情绪监控**: 智能识别心理状态变化和情感起伏
- **🎭 伏笔收集**: 记录承诺、约定、评价等可能被后续引用的内容
- **⚡ 实时监听**: 可开启实时模式，新消息自动分析更新
- **📊 智能去重**: 跨语言语义检测，避免重复记录相似内容

## 🚀 快速开始

### 1️⃣ 安装插件
1. https://github.com/HealthyControl/theghostface.git
2. 重启SillyTavern
3. 在扩展菜单中找到"👻 对鬼面发出决斗邀请"

### 2️⃣ 基础设置
1. **选择角色世界书**: 在World Info页面为角色绑定一个世界书
2. **打开控制台**: 点击扩展菜单中的鬼面选项
3. **调整设置**: 
   - 消息阈值：多少条新消息触发自动总结（推荐10-40）
   - 检测间隔：多久检查一次新消息（推荐1-10分钟）

### 3️⃣ 开始使用
- **🐕 自动模式**: 开启后达到阈值自动总结
- **📝 手动总结**: 指定楼层范围手动触发
- **⚔️ 门徒伏击**: 开启实时记忆陷阱系统

## 📋 详细功能说明

### 🎨 主题系统
插件提供9种精美主题，包括：
- 🌊 深海叹息 - 宁静海洋风
- 🤖 赛博朋克 - 科技未来感  
- 🦇 哥特暗黑 - 神秘暗黑风
- 🚀 科技空梦 - 太空科幻感
- 🎖️ 战术迷彩 - 军事风格
- ⭐ 无尽星辰 - 宇宙星空
- 🌿 翡翠森林 - 自然清新
- 🕳️ 深渊凝望 - 深邃神秘
- 🐷 猪猪来咯 - 可爱粉色系

### 📊 总结分类说明
插件会自动将对话内容分类到以下类别：

| 分类 | 说明 | 示例 |
|------|------|------|
| 🎯 喜好 | 兴趣、爱好、偏好 | "我喜欢听音乐" |
| 😨 恐惧 | 害怕、讨厌的事物 | "我害怕蜘蛛" |
| 📅 事件 | 重要经历（带日期） | "2024年3月1日 - 第一次见面" |
| 👥 关系 | 人际关系、社交 | "小明是我的好朋友" |
| 💭 梦境 | 梦想、幻想、愿望 | "希望能去巴黎旅行" |
| 🤝 互动 | 特殊互动习惯 | "喜欢拥抱表达亲密" |

### ⚡ 门徒实时系统
门徒系统专注于短期记忆连贯性：

**🎯 主线** - 当前核心话题
- 正在讨论的主要活动
- 情感焦点和状态

**💭 情绪** - 心理状态变化  
- 情绪起伏和内心动摇
- 关系变化和感受

**🎭 伏笔** - 实时连贯线索
- 约定类：承诺、计划、决定
- 评价类：观点、态度、喜恶
- 事件类：刚发生的事情
- 场景类：环境细节、当前状况

## 🔧 高级功能

### 🤖 自定义API
支持使用自定义API服务：
1. 在设置中启用"自定义API"
2. 配置API URL、密钥和模型
3. 支持OpenAI、Claude、Gemini等兼容API

### 📝 分段总结
处理长对话的最佳方式：
1. 设置每段楼层数（2-10条）
2. 设置保留楼层数（1-10条）
3. 一键开始分段总结

### 🔍 楼层管理
- **隐藏机制**: 总结后的消息自动隐藏，保持界面整洁
- **状态恢复**: 重新加载聊天时自动恢复隐藏状态
- **楼层追踪**: 自动记录已总结的最大楼层

## 💡 使用技巧

### 最佳实践
1. **世界书绑定**: 确保每个角色都绑定了专属世界书
2. **阈值设置**: 新手建议设置较低阈值（10-20），熟练后可提高
3. **定期检查**: 偶尔查看世界书确认总结质量
4. **门徒配合**: 开启门徒系统获得更全面的记忆管理

### 常见问题
**Q: 为什么没有自动总结？**
A: 检查是否开启自动模式，是否达到阈值，是否绑定世界书

**Q: 总结内容重复怎么办？**
A: 插件有智能去重机制，如仍有问题可手动清理世界书

**Q: 门徒面板显示"需要世界书"？**
A: 请先在World Info页面选择一个世界书

**Q: 自定义API无法连接？**
A: 检查URL格式、API密钥是否正确，确认网络连通性

## 🎯 更新日志

### v3.0 最新版本
- ✨ 新增门徒实时记忆系统
- 🧠 增强智能去重算法
- 🕐 支持时间感知总结
- 🤖 支持自定义API配置
- 🎨 新增猪猪主题
- 🔧 优化世界书自动管理

### 技术特性
- 📱 完全响应式设计，支持移动设备
- 🌍 中英文双语智能识别
- 🔒 本地存储，隐私安全
- ⚡ 高性能防抖机制
- 🎨 现代化UI设计

## 📞 支持与反馈

如果你在使用过程中遇到问题或有改进建议，欢迎：
- 📝 提交Issue报告问题
- 💡 分享使用心得和技巧  
- 🎨 建议新功能或改进

---

**享受与AI角色的每一次对话，让鬼面和门徒帮你记住所有美好的回忆！** 👻✨
